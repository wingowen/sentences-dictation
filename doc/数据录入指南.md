# 数据录入指南

本项目支持两种 JSON 数据格式，请根据需求选择合适的版本进行数据录入。

## 目录

- [快速入门](#快速入门)
- [版本说明](#版本说明)
- [v1.0.0 格式](#v100-格式)
- [v2.0.0 格式](#v200-格式)
- [字段详解](#字段详解)
- [最佳实践](#最佳实践)
- [验证工具](#验证工具)

---

## 快速入门

### 最简格式（v1.0.0）

只需准备英文句子列表：

```json
{
  "version": "1.0.0",
  "data": [
    "Hello, how are you?",
    "I'm fine, thank you."
  ]
}
```

### 完整格式（v2.0.0）

支持语法分析、词汇解析等丰富信息：

```json
{
  "version": "2.0.0",
  "metadata": {
    "title": "新概念英语第一册",
    "category": "教材",
    "difficulty": "beginner"
  },
  "data": [
    {
      "id": "L001-01",
      "english": "Excuse me, is this your handbag?",
      "chinese": "请问，这是您的手提包吗？"
    }
  ]
}
```

---

## 版本说明

| 版本 | 格式特点 | 适用场景 |
|------|----------|----------|
| `1.0.0` | 纯句子数组 | 快速录入、听写练习 |
| `1.1.0` | 文章+句子 | 有文章结构的文本 |
| `2.0.0` | 多层级结构 | 完整语法、词汇教学 |

---

## v1.0.0 格式

### 基本结构

```json
{
  "version": "1.0.0",
  "data": [
    "英文句子1",
    "英文句子2",
    "英文句子3"
  ]
}
```

### 字段说明

| 字段 | 类型 | 必填 | 说明 |
|------|------|------|------|
| `version` | string | 是 | 固定值 `"1.0.0"` |
| `data` | array | 是 | 句子数组，每项为字符串 |

### 完整示例

```json
{
  "version": "1.0.0",
  "data": [
    "Excuse me, is this your handbag?",
    "Yes, it is. Thank you very much.",
    "Is this your pen?",
    "No, it isn't. It's Tom's pen.",
    "What's your name?"
  ]
}
```

---

## v1.1.0 格式

适用于有文章/章节结构的文本，如新概念英语第三册。

### 基本结构

```json
{
  "version": "1.1.0",
  "metadata": {
    "source": "数据来源名称",
    "articleCount": 10
  },
  "articles": [
    {
      "id": 1,
      "title": "文章标题",
      "sentences": ["句子1", "句子2"]
    }
  ]
}
```

### 完整示例

```json
{
  "version": "1.1.0",
  "metadata": {
    "source": "新概念英语第三册",
    "articleCount": 48
  },
  "articles": [
    {
      "id": 1,
      "title": "3-001 A puma at large 逃遁的美洲狮",
      "sentences": [
        "When reports came into London Zoo that a wild puma had been spotted forty-five miles south of London, they were not taken seriously.",
        "However, as the evidence began to accumulate, experts from the Zoo felt obliged to investigate."
      ]
    }
  ]
}
```

---

## v2.0.0 格式

### 基本结构

```json
{
  "version": "2.0.0",
  "metadata": {
    "title": "标题",
    "category": "分类",
    "difficulty": "难度"
  },
  "data": [
    {
      "id": "唯一标识",
      "english": "英文原句",
      "chinese": "中文翻译"
    }
  ]
}
```

### 完整示例

```json
{
  "version": "2.0.0",
  "metadata": {
    "title": "新概念英语第一册",
    "category": "教材",
    "difficulty": "beginner",
    "source": "新概念英语"
  },
  "data": [
    {
      "id": "L001-01",
      "english": "Excuse me, is this your handbag?",
      "chinese": "请问，这是您的手提包吗？",
      "phonetic": "/ɪkˈskjuː miː ɪz ðɪs jɔː ˈhændbæɡ/",
      "collocation": {
        "items": [
          {
            "phrase": "excuse me",
            "meaning": "对不起/请问",
            "example": "Excuse me, could you tell me the time?"
          }
        ],
        "usage": "用于引起别人注意或表示歉意"
      },
      "usage": {
        "context": "向陌生人询问信息时的礼貌开头",
        "note": "英国英语中常用",
        "similar": ["Sorry to bother you"]
      },
      "sentencePattern": {
        "type": "一般疑问句",
        "structure": "Is this + your + noun?",
        "explanation": "这是...吗？用于确认物品归属",
        "template": "Is this your + 名词?"
      },
      "wordAnalysis": [
        {
          "word": "excuse",
          "phonetic": "/ɪkˈskjuːz/",
          "partOfSpeech": "verb",
          "meaning": "原谅，宽恕",
          "note": "动词发音为 /ɪkˈskjuːz/，名词为 /ɪkˈskjuːs/"
        },
        {
          "word": "handbag",
          "phonetic": "/ˈhændbæɡ/",
          "partOfSpeech": "noun",
          "meaning": "手提包，女用小提包",
          "note": "由 hand + bag 组成",
          "synonym": ["purse"]
        }
      ],
      "tags": ["日常会话", "疑问句"]
    },
    {
      "id": "L001-02",
      "english": "Yes, it is. Thank you very much.",
      "chinese": "是的，这是。非常感谢。",
      "collocation": {
        "items": [
          {
            "phrase": "thank you very much",
            "meaning": "非常感谢",
            "variations": ["thanks a lot", "thank you so much"]
          }
        ]
      }
    }
  ]
}
```

---

## 字段详解

### 必选字段

| 字段 | 类型 | 说明 |
|------|------|------|
| `id` | string | 唯一标识符，格式建议：`{章节}-{序号}`，如 `L001-01` |
| `english` | string | 英文原句 |
| `chinese` | string | 中文翻译 |

### 可选字段

#### 音标

```json
"phonetic": "/ɪkˈskjuː miː/"
```

#### 固定搭配 (collocation)

```json
"collocation": {
  "items": [
    {
      "phrase": "excuse me",
      "meaning": "对不起/请问",
      "example": "Excuse me, could you tell me the time?"
    }
  ],
  "usage": "用于引起别人注意或表示歉意"
}
```

#### 常见用法 (usage)

```json
"usage": {
  "context": "适用的对话场景",
  "note": "补充说明",
  "similar": ["类似的表达1", "类似的表达2"]
}
```

#### 重点句型 (sentencePattern)

```json
"sentencePattern": {
  "type": "疑问句",
  "structure": "Is this + your + noun?",
  "explanation": "句型解释",
  "template": "例句模板"
}
```

#### 词语解析 (wordAnalysis)

```json
"wordAnalysis": [
  {
    "word": "excuse",
    "phonetic": "/ɪkˈskjuːz/",
    "partOfSpeech": "verb",
    "meaning": "原谅，宽恕",
    "note": "发音区别或用法注意",
    "synonym": ["同义词1", "同义词2"],
    "antonym": ["反义词"]
  }
]
```

**partOfSpeech 词性缩写：**

| 缩写 | 词性 |
|------|------|
| `noun` | 名词 |
| `verb` | 动词 |
| `adj` | 形容词 |
| `adv` | 副词 |
| `prep` | 介词 |
| `conj` | 连词 |
| `pron` | 代词 |
| `num` | 数词 |
| `interj` | 感叹词 |

#### 标签 (tags)

```json
"tags": ["日常会话", "疑问句", "特殊疑问句"]
```

---

## 最佳实践

### 1. ID 命名规范

- 唯一且稳定不变
- 建议格式：`{类型}{序号}`，如 `L001-01`、`S005-03`、`E002-10`
- `L` = Lesson（课程）, `S` = Sentence（句子）, `E` = Example（例句）

### 2. 句子长度

| 场景 | 建议长度 |
|------|----------|
| 入门级别 | 5-15 词 |
| 中级 | 15-25 词 |
| 高级 | 25+ 词 |

### 3. 中文翻译

- 准确传达原意
- 符合中文表达习惯
- 避免过度直译
- 保持简洁

### 4. 词性分析

- 只分析关键词/难点词
- 每个句子 2-5 个分析词为宜
- 跳过基础词汇（如 a, the, is, I 等）

### 5. 句型标注

- 标注重点句型
- 提供可复用的模板
- 说明适用场景

---

## 文件命名规范

| 格式 | 示例 |
|------|------|
| 教材类 | `新概念英语第一册.json` |
| 场景类 | `日常会话.json` |
| 话题类 | `商务英语.json` |
| 级别类 | `初级词汇.json` |

---

## 验证工具

### 手动验证

1. 使用 JSON 格式化工具检查语法
2. 确保 UTF-8 编码
3. 验证文件扩展名为 `.json`

### 常见错误

| 错误 | 解决方案 |
|------|----------|
| 逗号错误 | 检查行末逗号和缺少逗号 |
| 引号不配对 | 确保所有字符串使用双引号 |
| 缺少闭括号 | 检查数组 `]` 和对象 `}` 闭合 |
| 版本号错误 | 使用正确的版本字符串 |

---

## 导入现有数据

### v1.0.0 转换脚本

```javascript
// 转换现有数据为带版本号格式
const fs = require('fs');

function migrateToV1(data) {
  return {
    version: "1.0.0",
    data: data
  };
}

// 读取现有文件
const existingData = ["句子1", "句子2"];
const newData = migrateToV1(existingData);
fs.writeFileSync('output.json', JSON.stringify(newData, null, 2));
```

---

## 联系与支持

如有疑问，请参考：
- 项目 README：了解整体功能
- src/services/dataService.js：查看解析器实现
- 现有数据文件：`src/data/*.json` 作为参考模板

---

**版本**: 1.0.0  
**最后更新**: 2026-02-04
